<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Ficha Recluta</title>
    <style>
        body {
            font-family: Arial;
            margin: 20px;
        }
        .section-title {
            background: #16283f;
            color: white;
            padding: 6px;
            margin-top: 15px;
        }
        .row {
            display: flex;
            gap: 10px;
            margin-top: 6px;
        }
        .box {
            flex: 1;
        }
        label {
            font-size: 12px;
            font-weight: bold;
        }
        .field {
            border: 1px solid black;
            height: 28px;
            border-radius: 6px;
            padding-left: 5px;
            display: flex;
            align-items: center;
        }
        .small { flex: .3; }
        .medium { flex: .6; }
        .large { flex: 2; }
        .foto {
            width: 120px;
            height: 150px;
            border: 1px solid black;
            overflow: hidden;
        }
        .pagebreak {
            page-break-before: always;
        }
    </style>
</head>
<body>

    <center>
        <b>REPÚBLICA DE PANAMÁ<br>
        MINISTERIO DE SEGURIDAD PÚBLICA<br>
        POLICÍA NACIONAL<br>
        DIRECCIÓN NACIONAL DE RECURSOS HUMANOS<br>
        DEPARTAMENTO DE RECLUTAMIENTO Y SELECCIÓN</b>
    </center>

    <div class="row">
        <div class="box large">
            <label>FECHA</label>
            <div id="fecha" class="field"></div>
        </div>
        <div class="box large">
            <label>CARGO</label>
            <div id="cargo" class="field"></div>
        </div>
        <div class="foto" id="foto"></div>
    </div>

    <!-- I -->
    <div class="section-title">I – DATOS GENERALES</div>
    <div class="row">
        <div class="box"><label>1ER APELLIDO</label><div id="apellido1" class="field"></div></div>
        <div class="box"><label>2DO APELLIDO</label><div id="apellido2" class="field"></div></div>
        <div class="box"><label>1ER NOMBRE</label><div id="nombre1" class="field"></div></div>
        <div class="box"><label>2DO NOMBRE</label><div id="nombre2" class="field"></div></div>
    </div>

    <div class="row">
        <div class="box"><label>CÉDULA</label><div id="cedula" class="field"></div></div>
        <div class="box"><label>APODO</label><div id="apodo" class="field"></div></div>
        <div class="box"><label>RELIGIÓN</label><div id="religion" class="field"></div></div>
    </div>

    <div class="row">
        <div class="box"><label>FECHA NAC</label><div id="fechaNac" class="field"></div></div>
        <div class="box small"><label>EDAD</label><div id="edad" class="field"></div></div>
        <div class="box"><label>TIPAJE</label><div id="tipaje" class="field"></div></div>
        <div class="box"><label>ESTADO CIVIL</label><div id="estadoCivil" class="field"></div></div>
        <div class="box"><label>IDIOMA</label><div id="idioma" class="field"></div></div>
    </div>

    <!-- DIRECCIÓN RESIDENCIAL -->
    <div class="section-title">DIRECCIÓN RESIDENCIAL</div>
    <div class="row"><div class="box"><label>PROVINCIA</label><div id="provincia" class="field"></div></div></div>
    <div class="row"><div class="box"><label>DISTRITO</label><div id="distrito" class="field"></div></div></div>
    <div class="row"><div class="box"><label>CORREGIMIENTO</label><div id="corregimiento" class="field"></div></div></div>
    <div class="row"><div class="box"><label>N° CASA Y COLOR</label><div id="casaColor" class="field"></div></div></div>
    <div class="row"><div class="box"><label>TIEMPO DE RESIDENCIA (/A años)</label><div id="tiempoResidencia" class="field"></div></div></div>
    <div class="row"><div class="box"><label>TELÉFONO RESIDENCIA</label><div id="telefonoResidencia" class="field"></div></div></div>
    <div class="row"><div class="box"><label>DIRECCIÓN ANTERIOR</label><div id="direccionAnterior" class="field"></div></div></div>

    <!-- III -->
    <div class="section-title">III – DATOS FAMILIARES</div>
    <div class="row">
        <div class="box large"><label>PADRE</label><div id="padre" class="field"></div></div>
        <div class="box"><label>PROFESIÓN</label><div id="padreProf" class="field"></div></div>
    </div>
    <div class="row">
        <div class="box large"><label>MADRE</label><div id="madre" class="field"></div></div>
        <div class="box"><label>PROFESIÓN</label><div id="madreProf" class="field"></div></div>
    </div>

    <div class="pagebreak"></div>

    <!-- IV -->
    <div class="section-title">IV – DATOS FÍSICOS</div>
    <div class="row">
        <div class="box"><label>ESTATURA</label><div id="estatura" class="field"></div></div>
        <div class="box"><label>PESO</label><div id="peso" class="field"></div></div>
        <div class="box"><label>CAMISA</label><div id="camisa" class="field"></div></div>
        <div class="box"><label>PANTALÓN</label><div id="pantalon" class="field"></div></div>
        <div class="box"><label>ZAPATO</label><div id="zapato" class="field"></div></div>
    </div>
    <div class="row">
        <div class="box"><label>CABELLO</label><div id="cabello" class="field"></div></div>
        <div class="box"><label>OJOS</label><div id="ojos" class="field"></div></div>
        <div class="box"><label>TEZ</label><div id="tez" class="field"></div></div>
        <div class="box large"><label>SEÑAS</label><div id="senas" class="field"></div></div>
    </div>

    <!-- V -->
    <div class="section-title">V – ESCOLARIDAD</div>
    <div class="row"><div class="box large"><label>PRIMARIA</label><div id="primaria" class="field"></div></div></div>
    <div class="row"><div class="box large"><label>PREMEDIA</label><div id="premedia" class="field"></div></div></div>
    <div class="row"><div class="box large"><label>MEDIA</label><div id="media" class="field"></div></div></div>
    <div class="row"><div class="box large"><label>SUPERIOR</label><div id="superior" class="field"></div></div></div>

    <div class="pagebreak"></div>

    <!-- VI -->
    <div class="section-title">VI – REFERENCIAS</div>
    <div class="row">
        <div class="box"><label>NOMBRE</label><div id="ref1" class="field"></div></div>
        <div class="box"><label>TEL</label><div id="ref1tel" class="field"></div></div>
    </div>
    <div class="row">
        <div class="box"><label>NOMBRE</label><div id="ref2" class="field"></div></div>
        <div class="box"><label>TEL</label><div id="ref2tel" class="field"></div></div>
    </div>

    <!-- VII -->
    <div class="section-title">VII – GRUPO FAMILIAR</div>
    <div class="row">
        <div class="box"><label>HIJOS</label><div id="hijos" class="field"></div></div>
        <div class="box"><label>HERMANOS</label><div id="hermanos" class="field"></div></div>
        <div class="box"><label>INGRESO</label><div id="ingreso" class="field"></div></div>
    </div>

    <!-- VIII -->
    <div class="section-title">VIII – HABILIDADES</div>
    <div class="row"><div class="box large"><label>DEPORTES / INSTRUMENTOS</label><div id="habilidades" class="field"></div></div></div>

    <!-- IX -->
    <div class="section-title">IX – MOTIVACIÓN</div>
    <div class="row"><div class="box large"><label>MOTIVO INGRESO</label><div id="motivo" class="field" style="height:60px"></div></div></div>

    <script>
        const URL_API = "https://script.google.com/macros/s/AKfycbxnM2CGWsEKq_Ygvy-d5kkU-PntI7M1BmibpHcKFB9hkWZXrIoDWK1QCJ64tVDU9VUf/exec";

        document.addEventListener("DOMContentLoaded", async () => {
            const cedula = localStorage.getItem("target_cedula");

            if (!cedula) {
                alert("No hay cédula seleccionada");
                return;
            }

            try {
                const res = await fetch(`${URL_API}?cedula=${encodeURIComponent(cedula)}`);
                const p = await res.json();

                if (p.error) {
                    alert(p.error);
                    return;
                }

                const set = (id, val) => {
                    const el = document.getElementById(id);
                    if (el) el.innerText = val || "";
                };

                // Llenado de campos
                set("fecha", p["Fecha postulacion"]);
                set("cargo", p["Cargo al que se postula"]);
                set("apellido1", p["1er Apellido"]);
                set("apellido2", p["2do. Apellido"]);
                set("nombre1", p["1er Nombre"]);
                set("nombre2", p["2do Nombre"]);
                set("cedula", p["Cedula"]);
                set("apodo", p["Apodo"]);
                set("religion", p["Religion"]);
                set("fechaNac", p["Fecha de nacimiento"]);
                set("edad", p["Edad"]);
                set("tipaje", p["Tipaje"]);
                set("estadoCivil", p["Estado civil"]);
                set("idioma", p["Idioma"]);
                set("provincia", p["Provincia"]);
                set("distrito", p["Distrito"]);
                set("corregimiento", p["Corregimiento"]);
                set("casaColor", p["N de casa y color"]);
                set("tiempoResidencia", p["Tiempo de residencia (años)"]);
                set("telefonoResidencia", p["Telefono residencia"]);
                set("direccionAnterior", p["Direcciòn anterior"]);

                // Foto (Corregido el ID de 'foto-container' a 'foto')
                if (p["Link_recluta_foto"] && p["Link_recluta_foto"] !== "Sin foto") {
                    const fotoDiv = document.getElementById("foto");
                    if (fotoDiv) {
                        fotoDiv.innerHTML = `<img src="${p["Link_recluta_foto"]}" style="width:100%;height:100%;object-fit:cover;">`;
                    }
                }
            } catch (error) {
                console.error("Error cargando datos:", error);
            }
        });
    </script>
</body>
</html>